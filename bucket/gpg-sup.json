{
    "homepage": "https://gnupg.org",
    "version": "4.3.1",
    "license": "GPLv3",
    "url": "https://files.gpg4win.org/gpg4win-4.3.1.exe#/dl.7z",
    "hash": "2db44b086d860c51a4f45f43a739cd20fb0822189deb1c1cf13e4b5a3b05bc3b",
    "bin": [
        "GnuPG/bin/gpg.exe",
        [
            "GnuPG/bin/gpg.exe",
            "gpg2"
        ],
        "GnuPG/bin/gpgconf.exe",
        "GnuPG/bin/gpgsm.exe",
        "GnuPG/bin/gpgtar.exe",
        "GnuPG/bin/gpgv.exe",
        "GnuPG/bin/gpg-connect-agent.exe",
        "bin/gpa.exe",
        "bin/kleopatra.exe"
    ],
    "pre_install": [
        "# GnuPGHOME",
        "# * use 'pre_install' (or 'post_install') instead of 'env_set' so that `scoop` doesn't remove the variable if/when uninstalled",
        "# respect USER value, if defined",
        "Write-Host 'step 0'",
        "if ($env:GnuPGHOME) { } else {",
        "    Write-Host 'step 1'",
        "    # otherwise, 1st existing known default; otherwise, 1st of known defaults",
        "    $default_dirs = @( \"$env:USERPROFILE\\.gnupg\", \"$env:USERPROFILE\\.keydb\" )",
        "    Write-Host 'step 2'",
        "    $val = @( $($default_dirs |% { get-item $_ -ea silent }), $default_dirs[0] ) | select -first 1",
        "    Write-Host 'step 3'",
        "    # ensure directory exists",
        "    new-item $val -type directory -force | out-null",
        "    Write-Host 'step 4'",
        "    # add to environment",
        "    env GnuPGHOME -t $global $val",
        "    Write-Host 'step 5'",
        "    env GnuPGHOME $val",
        "    Write-Host 'step 6'",
        "}",
        "Get-Item \"$dir\\`$TEMP\\*-bin.exe\" |% { $n = $_.name ; $d = \"$dir\\`$TEMP\\$n\"; Write-Host -NoNewLine \"extracting `\"$n`\"...\"; extract_7zip \"$d\" \"$dir\\GnuPG\" ; Write-Host 'done' ; }"
    ],
    "uninstaller": {
        "script": [
            "",
            "& cmd @('/c','taskkill /F /T /IM gpa.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM kleopatra.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM dbus-daemon.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM dirmngr.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM gpg-agent.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM gpg-connect-agent.exe 1>NUL 2>NUL')",
            "& cmd @('/c','taskkill /F /T /IM scdaemon.exe 1>NUL 2>NUL')"
        ]
    },
    "checkver": {
        "url": "https://www.gpg4win.org/download.html",
        "re": "Gpg4win ([0-9.]+)"
    },
    "autoupdate": {
        "url": "https://files.gpg4win.org/gpg4win-$version.exe#/dl.7z"
    }
}
